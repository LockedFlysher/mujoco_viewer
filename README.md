# PyNebula 项目

这是一个基于 MuJoCo 和 JAX 的机器人仿真与控制项目。本文档主要介绍其中包含的`Mujoco 模型查看器`工具。

## Mujoco 模型查看器

`Mujoco 模型查看器`是一个基于 PyQt5 开发的图形化工具，用于可视化、调试和交互式地操作 MuJoCo 模型。

### 功能特性

*   **加载模型**: 支持从本地加载 MuJoCo `.xml` 模型文件。
*   **路径记忆**: 能够自动保存和加载上次成功打开的模型路径，方便快速访问。
*   **双窗口视图**: 采用独立的控制面板和渲染窗口，界面清晰，操作互不干扰。
*   **分离式控制**:
    *   **基座控制**: 自动检测并为模型的浮动基座（free joint）提供独立的XYZ位置和RPY姿态控制器。
    *   **关节控制**: 为模型中的所有其他关节（如旋转、滑动关节）提供独立的滑块和数值输入框进行精确调节。
*   **实时信息反馈**:
    *   在面板中清晰展示模型的关键信息（如模型名称、**可动关节数量（已排除基座）**、自由度等）。
    *   状态栏实时反馈当前操作结果（如加载成功/失败、查看器状态）。
*   **姿态重置**: 可以一键将模型恢复到其在XML中定义的初始默认姿态。
*   **静态场景**: 查看器启动后，默认不进行物理仿真（即`mj_step`被注释），模型不会因重力下坠，便于静态姿态的观察和调整。

### 如何运行

1.  **安装依赖**:
    请确保已安装以下Python库：
    ```bash
    pip install mujoco pyqt5 numpy
    ```

2.  **启动程序**:
    在项目根目录下运行以下命令：
    ```bash
    python pynebula/pinosadi/utils/mujoco_viewer.py
    ```

### 使用说明

1.  **加载模型**:
    *   启动程序后，主窗口会显示。
    *   如果之前成功加载过模型，路径输入框会自动填入上次的路径。
    *   点击 **“浏览”** 按钮选择一个新的 `.xml` 模型文件。
    *   点击 **“加载模型”** 按钮。成功后，右侧信息面板会更新，并且“启动查看器”按钮会变为可用。

2.  **启动/停止查看器**:
    *   点击 **“启动查看器”** 按钮，会弹出一个独立的窗口来渲染3D模型。
    *   可以通过鼠标在渲染窗口中交互，调整相机视角。
    *   点击 **“停止查看器”** 按钮可以关闭渲染窗口。

3.  **控制模型**:
    *   如果模型含有浮动基座，**“基座控制”** 面板会自动出现。您可以通过其中的输入框精确调整模型的空间位置(XYZ)和姿态(RPY)。
    *   在 **“关节控制”** 面板中，您可以通过拖动滑块或直接输入数值来控制各个关节的角度或位置。
    *   所有调整都会实时在渲染窗口中反映出来。

4.  **重置姿态**:
    *   点击 **“重置姿态”** 按钮，模型会恢复到其初始状态，同时所有控制滑块和输入框也会同步更新。
